#{extends 'main.html' /}
#{set title:'FaceRating' /}
<div class="row" id="container" >
	<div class="col col_10" id="left_container">
		<h1>Face Rating System</h1>
		<form id="url-form" method="post" action="">
			<fieldset class="s_column">
				<label>Url<label>
				<input type="text" name="url" id="url-to-view"/>
				<input type="submit" value="GO"/>
			</fieldset>
		</form>
	
	
	
		<div id="url-content">
		</div>
	
	</div>
	<div class="col col_6" id="right_container">
		<h1>What did you think ?</h1>
		<div id="stream-container" class="container">
			<div id="publisher-container">
				<div id="publisher"></div>				
			</div>
			<div class="button-container">
				<button id="identifyButton" style="display: none">FaceRate it</button>
			</div>
		</div>
	</div>
</div>
<div class="row">
	<h3>What others thought :</h3>
	<img src="./public/images/face.png" />
</div>
<div class="row">
	<div class="col col_16" id="footer">
		<h3>Powered by</h3>
		<img src="http://developers.face.com/wordpress/wp-content/uploads/2010/04/logo_500_138-300x82.png" class="logo"/>&nbsp;
		<img src="http://embed.ly/static/images/logos/embedly-powered-large-light.png" class="logo"/>&nbsp;
		<img src="http://static.opentok.com/opentok/assets/img/shared/logos/opentok-logo.png" class="logo"/>
	</div>

</div>

<script src="http://staging.tokbox.com/v0.91/js/TB.min.js" ></script>
<script src="@{'/public/javascripts/face-rating.js'}" type="text/javascript" charset="utf-8"></script>
<script type="text/javascript">
$(document).ready(function() {
	function getUrlContent(url) {
		var data = "url="+url;
		console.log(data);
		$.ajax({
			url: '@@{Application.getLinkHTML}',
			data: data,
			type: "POST",
			crossDomain: true,
			success: function(response) {
				drawUrlContent(response);
			}
		});
	}

	function drawUrlContent(content) {
		$('#url-content').html(content);
	}
	$('#url-form').submit(function(e){
		console.log('submiting form');
		e.preventDefault();
		getUrlContent($('#url-to-view').attr('value'));
	});
	console.log('Finished');
});
</script>